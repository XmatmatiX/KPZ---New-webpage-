<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css"/>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Italiana&family=Roboto+Flex:opsz,wght@8..144,300&display=swap" rel="stylesheet">

    <title>KPZ</title>
    <script src="keycloak_modules/keycloak-js/dist/keycloak.js"></script>
    <script>
        const keycloak = new Keycloak({
                url: 'https://login.pwr.edu.pl/auth/realms/pwr.edu.pl/protocol/openid-connect/',
                realm: 'PWr',
                clientId: 'projekty.kpz.pwr.edu.pl',

            });

        var userRegister;

        function initKeycloak() {
            keycloak.init({onLoad: 'login-required'}).then(function(authenticated) {
                if(authenticated)
                {
                    Login();
                }
            }).catch(function() {
                alert('failed to initialize');
            });
        }

        function Login(){
            var jsonString = JSON.stringify(keycloak.tokenParsed);
            var data = JSON.parse(jsonString);
            console.log(data);
        }

    </script>

</head>
<body>
</body>

<button onclick="initKeycloak()">zaloguj</button>
</html>